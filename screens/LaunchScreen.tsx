import {useEffect} from 'react';
import {StyleSheet, Text, View} from 'react-native';
import {useDispatch, useSelector} from 'react-redux';
import {updateDailyWork} from '../redux/dailyWork';
import {DailyWork, UserInfo} from '../constants/interfaces';
import {RootState} from '../redux';
import {updateUserInfo} from '../redux/userInfo';

import {MMKV} from 'react-native-mmkv';

export const storage = new MMKV();

export default function LaunchScreen({navigation}: any) {
  const dailyWork = useSelector((state: RootState) => state.dailyWork);
  const userInfo = useSelector((state: RootState) => state.userInfo);

  const dispatch = useDispatch();

  async function GetData() {
    const workDataStorage = storage.getString('workData');

    if (!!workDataStorage && JSON.parse(workDataStorage).length) {
      dispatch(updateDailyWork(JSON.parse(workDataStorage)));
    } else {
      storage.set('workData', JSON.stringify(a));

      dispatch(updateDailyWork(a));
    }

    const userInfoStorage = storage.getString('userInfo');
    if (!!userInfoStorage) {
      dispatch(updateUserInfo(JSON.parse(userInfoStorage)));
    } else {
      const temporary: UserInfo = {
        tasksAmount: 60,
      };
      storage.set('userInfo', JSON.stringify(temporary));
      dispatch(updateUserInfo(temporary));
    }
  }

  useEffect(() => {
    if (dailyWork.length > 0 && userInfo.tasksAmount) {
      navigation.reset({
        index: 0,
        routes: [{name: 'NavigationApp'}],
      });
    }
  }, [dailyWork]);

  useEffect(() => {
    GetData();
  }, []);
  return (
    <View style={styles.container}>
      <Text>loading</Text>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flexDirection: 'column',
    alignItems: 'center',
    justifyContent: 'flex-start',
    backgroundColor: '#eee',
    flex: 1,
  },
});

const a: DailyWork[] = [
  {
    timestamp: '1701388800000',
    year: 2023,
    month: 12,
    date: 1,
    tasks: 41,
    chats: 3,
    workingDay: true,
    taskName: 'Вакцинація',
  },
  {
    timestamp: '1701648000000',
    year: 2023,
    month: 12,
    date: 4,
    tasks: 59,
    chats: 6,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1701734400000',
    year: 2023,
    month: 12,
    date: 5,
    tasks: 57,
    chats: 8,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1701820800000',
    year: 2023,
    month: 12,
    date: 6,
    tasks: 46,
    chats: 7,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1701907200000',
    year: 2023,
    month: 12,
    date: 7,
    tasks: 51,
    chats: 9,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1701993600000',
    year: 2023,
    month: 12,
    date: 8,
    tasks: 58,
    chats: 7,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1702252800000',
    year: 2023,
    month: 12,
    date: 11,
    tasks: 67,
    chats: 9,
    workingDay: true,
  },
  {
    timestamp: '1702339200000',
    year: 2023,
    month: 12,
    date: 12,
    tasks: 55,
    chats: 4,
    workingDay: true,
  },
  {
    timestamp: '1702425600000',
    year: 2023,
    month: 12,
    date: 13,
    tasks: 60,
    chats: 4,
    workingDay: true,
  },
  {
    timestamp: '1702512000000',
    year: 2023,
    month: 12,
    date: 14,
    tasks: 45,
    chats: 8,
    workingDay: true,
    taskName: 'Екстрені',
  },
  {
    timestamp: '1702598400000',
    year: 2023,
    month: 12,
    date: 15,
    tasks: 53,
    chats: 4,
    workingDay: true,
  },
  {
    timestamp: '1702857600000',
    year: 2023,
    month: 12,
    date: 18,
    tasks: 57,
    chats: 13,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1702944000000',
    year: 2023,
    month: 12,
    date: 19,
    tasks: 61,
    chats: 9,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1703030400000',
    year: 2023,
    month: 12,
    date: 20,
    tasks: 58,
    chats: 6,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1703116800000',
    year: 2023,
    month: 12,
    date: 21,
    tasks: 53,
    chats: 6,
    workingDay: true,
  },
  {
    timestamp: '1703203200000',
    year: 2023,
    month: 12,
    date: 22,
    tasks: 63,
    chats: 6,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1703462400000',
    year: 2023,
    month: 12,
    date: 25,
    tasks: 53,
    chats: 5,
    workingDay: true,
    taskName: 'ТМК',
  },
  {
    timestamp: '1703548800000',
    year: 2023,
    month: 12,
    date: 26,
    tasks: 58,
    chats: 7,
    workingDay: true,
    taskName: 'ТМК',
  },
  {
    timestamp: '1703635200000',
    year: 2023,
    month: 12,
    date: 27,
    tasks: 58,
    chats: 8,
    workingDay: true,
    taskName: 'ТМК',
  },
  {
    timestamp: '1703721600000',
    year: 2023,
    month: 12,
    date: 28,
    tasks: 52,
    chats: 7,
    workingDay: true,
    taskName: 'ТМК',
  },
  {
    timestamp: '1703808000000',
    year: 2023,
    month: 12,
    date: 29,
    tasks: 59,
    chats: 5,
    workingDay: true,
  },
  {
    timestamp: '1704326400000',
    year: 2024,
    month: 1,
    date: 4,
    tasks: 55,
    chats: 10,
    workingDay: true,
    taskName: 'Екстрені',
  },
  {
    timestamp: '1704412800000',
    year: 2024,
    month: 1,
    date: 5,
    tasks: 67,
    chats: 0,
    workingDay: true,
    taskName: 'Екстрені',
  },
  {
    timestamp: '1704672000000',
    year: 2024,
    month: 1,
    date: 8,
    tasks: 66,
    chats: 8,
    workingDay: true,
    taskName: 'ТМК',
  },
  {
    timestamp: '1704758400000',
    year: 2024,
    month: 1,
    date: 9,
    tasks: 58,
    chats: 10,
    workingDay: true,
    taskName: 'ТМК',
  },
  {
    timestamp: '1704844800000',
    year: 2024,
    month: 1,
    date: 10,
    tasks: 53,
    chats: 11,
    workingDay: true,
    taskName: 'ТМК',
  },
  {
    timestamp: '1704931200000',
    year: 2024,
    month: 1,
    date: 11,
    tasks: 59,
    chats: 10,
    workingDay: true,
  },
  {
    timestamp: '1705017600000',
    year: 2024,
    month: 1,
    date: 12,
    tasks: 50,
    chats: 10,
    workingDay: true,
    taskName: 'ТМК',
  },
  {
    timestamp: '1705276800000',
    year: 2024,
    month: 1,
    date: 15,
    tasks: 51,
    chats: 5,
    workingDay: true,
    taskName: 'Стоматологія',
  },
  {
    timestamp: '1705363200000',
    year: 2024,
    month: 1,
    date: 16,
    tasks: 48,
    chats: 8,
    workingDay: true,
    taskName: 'Стоматологія',
  },
  {
    timestamp: '1705449600000',
    year: 2024,
    month: 1,
    date: 17,
    tasks: 50,
    chats: 6,
    workingDay: true,
    taskName: 'Стоматологія',
  },
  {
    timestamp: '1705536000000',
    year: 2024,
    month: 1,
    date: 18,
    tasks: 47,
    chats: 10,
    workingDay: true,
    taskName: 'Стоматологія',
  },
  {
    timestamp: '1705622400000',
    year: 2024,
    month: 1,
    date: 19,
    tasks: 47,
    chats: 5,
    workingDay: true,
    taskName: 'Стоматологія',
  },
  {
    timestamp: '1705881600000',
    year: 2024,
    month: 1,
    date: 22,
    tasks: 54,
    chats: 8,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1705968000000',
    year: 224,
    month: 1,
    date: 23,
    tasks: 49,
    chats: 12,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1706054400000',
    year: 2024,
    month: 1,
    date: 24,
    tasks: 50,
    chats: 6,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1706140800000',
    year: 2024,
    month: 1,
    date: 25,
    tasks: 52,
    chats: 5,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1706227200000',
    year: 2024,
    month: 1,
    date: 26,
    tasks: 48,
    chats: 3,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1706486400000',
    year: 2024,
    month: 1,
    date: 29,
    tasks: 58,
    chats: 6,
    workingDay: true,
    taskName: 'Екстрені',
  },
  {
    timestamp: '1706572800000',
    year: 2024,
    month: 1,
    date: 30,
    tasks: 58,
    chats: 7,
    workingDay: true,
    taskName: 'Екстрені',
  },
  {
    timestamp: '1706659200000',
    year: 2024,
    month: 1,
    date: 31,
    tasks: 48,
    chats: 9,
    workingDay: true,
  },
  {
    timestamp: '1706745600000',
    year: 2024,
    month: 2,
    date: 1,
    tasks: 48,
    chats: 4,
    workingDay: true,
    taskName: 'Екстрені',
  },
  {
    timestamp: '1706832000000',
    year: 2024,
    month: 2,
    date: 2,
    tasks: 65,
    chats: 5,
    workingDay: true,
    taskName: 'Екстрені',
  },
  {
    timestamp: '1707091200000',
    year: 2024,
    month: 2,
    date: 5,
    tasks: 56,
    chats: 7,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1707177600000',
    year: 2024,
    month: 2,
    date: 6,
    tasks: 62,
    chats: 9,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1707264000000',
    year: 2024,
    month: 2,
    date: 7,
    tasks: 54,
    chats: 8,
    workingDay: true,
    taskName: 'Стоматологія',
  },
  {
    timestamp: '1707350400000',
    year: 2024,
    month: 2,
    date: 8,
    tasks: 51,
    chats: 4,
    workingDay: true,
    taskName: 'Стоматологія',
  },
  {
    timestamp: '1707436800000',
    year: 2024,
    month: 2,
    date: 9,
    tasks: 47,
    chats: 12,
    workingDay: true,
    taskName: 'Стоматологія',
  },
  {
    timestamp: '1707782400000',
    year: 2024,
    month: 2,
    date: 13,
    tasks: 60,
    chats: 6,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1707868800000',
    year: 2024,
    month: 2,
    date: 14,
    tasks: 50,
    chats: 4,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1707955200000',
    year: 2024,
    month: 2,
    date: 15,
    tasks: 47,
    chats: 6,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1708041600000',
    year: 2024,
    month: 2,
    date: 16,
    tasks: 53,
    chats: 5,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1708300800000',
    year: 2024,
    month: 2,
    date: 19,
    tasks: 57,
    chats: 7,
    workingDay: true,
  },
  {
    timestamp: '1708387200000',
    year: 2024,
    month: 2,
    date: 20,
    tasks: 57,
    chats: 4,
    workingDay: true,
    taskName: 'Стоматологія',
  },
  {
    timestamp: '1708473600000',
    year: 2024,
    month: 2,
    date: 21,
    tasks: 54,
    chats: 6,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1708560000000',
    year: 2024,
    month: 2,
    date: 22,
    tasks: 56,
    chats: 7,
    workingDay: true,
  },
  {
    timestamp: '1708646400000',
    year: 2024,
    month: 2,
    date: 23,
    tasks: 54,
    chats: 6,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1708905600000',
    year: 2024,
    month: 2,
    date: 26,
    tasks: 57,
    chats: 5,
    workingDay: true,
    taskName: 'Стоматологія',
  },
  {
    timestamp: '1708992000000',
    year: 2024,
    month: 2,
    date: 27,
    tasks: 54,
    chats: 8,
    workingDay: true,
    taskName: 'Стоматологія',
  },
  {
    timestamp: '1709078400000',
    year: 2024,
    month: 2,
    date: 28,
    tasks: 47,
    chats: 5,
    workingDay: true,
    taskName: 'Стоматологія',
  },
  {
    timestamp: '1709164800000',
    year: 2024,
    month: 2,
    date: 29,
    tasks: 55,
    chats: 5,
    workingDay: true,
    taskName: 'Стоматологія',
  },
  {
    timestamp: '1709251200000',
    year: 2024,
    month: 3,
    date: 1,
    tasks: 55,
    chats: 4,
    workingDay: true,
    taskName: 'Стоматологія',
  },
  {
    timestamp: '1709510400000',
    year: 2024,
    month: 3,
    date: 4,
    tasks: 67,
    chats: 6,
    workingDay: true,
    taskName: 'ТМК',
  },
  {
    timestamp: '1709596800000',
    year: 2024,
    month: 3,
    date: 5,
    tasks: 58,
    chats: 4,
    workingDay: true,
    taskName: 'ТМК',
  },
  {
    timestamp: '1709683200000',
    year: 2024,
    month: 3,
    date: 6,
    tasks: 54,
    chats: 5,
    workingDay: true,
    taskName: 'ТМК',
  },
  {
    timestamp: '1709769600000',
    year: 2024,
    month: 3,
    date: 7,
    tasks: 49,
    chats: 7,
    workingDay: true,
    taskName: 'ТМК',
  },
  {
    timestamp: '1709856000000',
    year: 2024,
    month: 3,
    date: 8,
    tasks: 49,
    chats: 3,
    workingDay: true,
    taskName: 'ТМК',
  },
  {
    timestamp: '1710115200000',
    year: 2024,
    month: 3,
    date: 11,
    tasks: 54,
    chats: 7,
    workingDay: true,
  },
  {
    timestamp: '1710201600000',
    year: 2024,
    month: 3,
    date: 12,
    tasks: 52,
    chats: 5,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1710288000000',
    year: 2024,
    month: 3,
    date: 13,
    tasks: 60,
    chats: 4,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1710374400000',
    year: 2024,
    month: 3,
    date: 14,
    tasks: 51,
    chats: 7,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1710460800000',
    year: 2024,
    month: 3,
    date: 15,
    tasks: 54,
    chats: 4,
    workingDay: true,
    taskName: 'Лабораторія',
  },
  {
    timestamp: '1710720000000',
    year: 2024,
    month: 3,
    date: 18,
    tasks: 57,
    chats: 5,
    workingDay: true,
    taskName: 'Екстрені',
  },
  {
    timestamp: '1710806400000',
    year: 2024,
    month: 3,
    date: 19,
    tasks: 52,
    chats: 5,
    workingDay: true,
    taskName: 'Екстрені',
  },
  {
    timestamp: '1710892800000',
    year: 2024,
    month: 3,
    date: 20,
    tasks: 55,
    chats: 5,
    workingDay: true,
    taskName: 'Екстрені',
  },
  {
    timestamp: '1711065600000',
    year: 2024,
    month: 3,
    date: 22,
    tasks: 40,
    chats: 4,
    workingDay: true,
  },
  {
    timestamp: '1710979200000',
    year: 2024,
    month: 3,
    date: 21,
    tasks: 41,
    chats: 8,
    workingDay: true,
  },
  {
    timestamp: '1711324800000',
    year: 2024,
    month: 3,
    date: 25,
    tasks: 57,
    chats: 6,
    workingDay: true,
  },
  {
    timestamp: '1711411200000',
    year: 2024,
    month: 3,
    date: 26,
    tasks: 62,
    chats: 6,
    workingDay: true,
    taskName: 'Стоматологія',
  },
  {
    timestamp: '1711497600000',
    year: 2024,
    month: 3,
    date: 27,
    tasks: 0,
    chats: 0,
    workingDay: true,
  },
];
